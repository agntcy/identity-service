# SonarQube configuration for Pyramid Platform
# Copyright 2025 Copyright AGNTCY Contributors (https://github.com/agntcy)
# SPDX-License-Identifier: Apache-2.0

# Project identification
sonar.projectKey=IoA-Identity
sonar.projectName=Pyramid Platform
sonar.projectVersion=1.0

# Source code configuration
sonar.sources=backend,frontend/src,docs/src

# Language-specific configurations
# Go configuration
sonar.go.coverage.reportPaths=backend/coverage.out

# TypeScript/JavaScript coverage reports
sonar.typescript.lcov.reportPaths=frontend/coverage/lcov.info
# sonar.javascript.lcov.reportPaths=frontend/coverage/lcov.info
sonar.typescript.tsconfigPaths=frontend/tsconfig.json

# Test configurations
sonar.test.inclusions=**/*_test.go,**/test/**,**/*.test.ts,**/*.test.tsx,**/*.spec.ts,**/*.spec.tsx,**/test_*.py,**/*_test.py

# Exclusions - files to exclude from analysis
sonar.exclusions=**/node_modules/**,\
    **/vendor/**,\
    **/build/**,\
    **/dist/**,\
    **/dev-dist/**,\
    **/.vite/**,\
    **/.yarn/**,\
    **/*.pb.go,\
    **/*.pb.gw.go,\
    **/*.proto,\
    **/generated/**,\
    **/*.gen.go,\
    **/mock_*.go,\
    charts/**,\
    deployments/**,\
    scripts/**,\
    img/**,\
    **/*.md,\
    **/.git/**,\
    **/.github/**,\
    **/*.yaml,\
    **/*.yml,\
    **/*.json,\
    **/*.lock,\
    frontend/coverage/**,\
    frontend/.vscode/**,\
    frontend/.husky/**,\
    frontend/.eslintcache,\
    frontend/.swc/**,\
    frontend/.cache/**,\
    frontend/public/**,\
    frontend/src/api/generated/**,\
    frontend/src/api/services/**,\
    docs/build/**,\
    docs/node_modules/**,\
    docs/static/**,\
    docs/protodocs/**,\
    samples/**,\
    backend/vendor/**,\
    backend/**/mock_*.go,\
    backend/**/*.pb.go,\
    backend/**/*.proto,\
    backend/api/spec/static/**,\
    backend/api/spec/proto/**,\
    backend/**/mocks/**

# Coverage exclusions - files to exclude from coverage analysis
sonar.coverage.exclusions=**/*_test.go,\
    **/mock_*.go,\
    **/*.pb.go,\
    **/*.pb.gw.go,\
    **/*.test.ts,\
    **/*.test.tsx,\
    **/*.spec.ts,\
    **/*.spec.tsx,\
    **/test_*.py,\
    **/*_test.py,\
    backend/**/mocks/**,\
    backend/**/postgres/**,\
    backend/**/main.go,\
    backend/internal/pkg/iam/iam.go,\
    backend/pkg/log/log.go,\
    backend/internal/core/idp/duo_idp.go,\
    backend/internal/core/idp/okta_idp.go,\
    backend/internal/core/idp/ory_idp.go,\
    backend/internal/pkg/vault/vault.go,\
    backend/pkg/db/context.go,\
    frontend/src/vite-env.d.ts,\
    frontend/src/main.tsx,\
    frontend/src/api/generated/**,\
    frontend/src/api/services/**

# Duplication exclusions
sonar.cpd.exclusions=**/*.pb.go,\
    **/generated/**,\
    **/*.proto,\
    frontend/src/api/generated/**,\
    frontend/src/api/services/**

# Encoding
sonar.sourceEncoding=UTF-8

# Analysis parameters
# sonar.qualitygate.wait=true

# Additional project information
sonar.links.homepage=https://github.com/agntcy/pyramid-platform
sonar.links.ci=https://github.com/agntcy/pyramid-platform/actions
sonar.links.scm=https://github.com/agntcy/pyramid-platform
sonar.links.issue=https://github.com/agntcy/pyramid-platform/issues

# Language distribution (optional - helps with project insights)
# Detected languages: Go, TypeScript, JavaScript, Python, YAML, JSON, Markdown
